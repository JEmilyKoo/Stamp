<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mybatis.mapper.profile">

<!-- 생성 -->	
	<!--  프로필 생성 insertProfile -->
	<insert id="sqlInsertProfile" parameterType="profileDTO">
		INSERT INTO PROFILE 
		(NICKNAME, ID, MAIL, TRVPRPNS, PR, GENDER, BIRTH, PHONE, LEV, EXP, OPENPRF)
		VALUES
		(#{nickName}, #{id}, #{mail}, #{trvprpns}, #{pr}, #{gender}, #{birth}, #{phone}, #{lev}, #{exp}, #{openprf})
	</insert>
	
<!-- 삭제 -->
	<!-- 프로필 삭제 deleteProfile -->
	<delete id="sqlDeleteProfile" parameterType="profileDTO">
		DELETE FROM "STAMP"."PROFILE" WHERE ID=#{id}
	</delete>	
	
<!-- 수정 -->	
	<!-- 프로필 수정 updateProfile -->
	<update id="sqlUpdateProfile" parameterType="profileDTO">
		UPDATE "STAMP"."PROFILE" SET
		MAIL=#{mail}, TRVPRPNS=#{trvprpns}, PR=#{pr},
		<if test='prfimage != null'>
			PRIIMAGE=#{prfimage},
		</if>
		GENDER=#{gender}, BIRTH=#{birth}, PHONE=#{phone}, LEV=#{lev}, EXP=#{exp}, OPENPRF=#{openprf}
		WHERE ID = #{id}
	</update>

<!-- 선택 -->

	<!-- 해당 닉네임의 프로필 선택 selectProfile-->	
	<select id="sqlSelectProfile" parameterType="profileDTO"
		resultType="profileDTO">
		SELECT * FROM PROFILE 
		WHERE nickName=#{nickName}
	</select>

	<!-- 해당 멤버-아이디의 프로필 선택 selectProfileFromMember -->
	<select id="sqlSelectProfileFromMember"
		parameterType="memberDTO" resultType="profileDTO">
		select * From PROFILE where id=#{id}
	</select>

<!-- 체크 -->
	<!-- // 해당 닉네임의 프로필이 있는지 중복 여부 체크(1이라면 있다/ 0이라면 없다) NickNameCheck
     -->
	<select id="sqlNickNameCheck" parameterType="profileDTO" resultType="Int">
		SELECT count(*) FROM PROFILE
		WHERE NICKNAME = #{nickName}
	</select>
</mapper>